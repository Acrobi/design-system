{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/External%202TB/bucca/REPOS/Acrobi/design-system/src/components/ui/theme-provider.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\n// ===================================\n// 🎨 THEME PROVIDER CONFIGURATION\n// ===================================\n// 🚨 AI AGENT GUIDANCE:\n// - This provider handles both mode switching (light/dark/system) AND color theme switching\n// - DO NOT modify the type definitions unless adding new themes\n// - DO NOT change the storage keys unless updating the entire system\n// - Color themes are loaded dynamically from separate CSS files in /themes directory\n// - This follows the proper architecture: separate theme files with dynamic loading\n// ===================================\n\ntype Mode = \"light\" | \"dark\" | \"system\"\ntype ColorTheme = \"base\" | \"blue\" | \"purple\" | \"green\" | \"orange\" | \"red\"\n\n// 🚨 DO NOT modify these interfaces unless adding new theme functionality\ninterface ThemeProviderProps {\n  children: React.ReactNode\n  defaultMode?: Mode          // Default mode on first load\n  defaultTheme?: ColorTheme   // Default color theme on first load\n  modeStorageKey?: string    // localStorage key for mode persistence\n  themeStorageKey?: string   // localStorage key for theme persistence\n  enableSystem?: boolean     // Enable system preference detection\n}\n\ninterface ThemeContextType {\n  mode: Mode                 // Current selected mode\n  setMode: (mode: Mode) => void   // Function to change mode\n  resolvedMode: \"light\" | \"dark\"  // Actual resolved mode (system -> light/dark)\n  toggleMode: () => void          // Function to cycle through modes\n  theme: ColorTheme          // Current color theme\n  setTheme: (theme: ColorTheme) => void  // Function to change color theme\n  toggleTheme: () => void          // Function to cycle through themes\n}\n\n// ===================================\n// 📱 THEME CONTEXT PROVIDER\n// ===================================\n// 🚨 AI AGENT GUIDANCE:\n// - This context provides theme mode functionality to the entire app\n// - DO NOT modify the context structure\n// - DO NOT add theme switching logic here - use CSS classes for client themes\n// - The provider handles DOM manipulation for .dark class\n// - localStorage persistence is automatic\n// ===================================\n\nconst ThemeContext = React.createContext<ThemeContextType | undefined>(undefined)\n\nexport function ThemeProvider({\n  children,\n  defaultMode = \"system\",\n  defaultTheme = \"base\",\n  modeStorageKey = \"acrobi-theme-mode\",\n  themeStorageKey = \"acrobi-color-theme\",\n  enableSystem = true,\n}: ThemeProviderProps) {\n  // 🚨 DO NOT modify these state initializations - they prevent hydration mismatches\n  const [mode, setModeState] = React.useState<Mode>(defaultMode)\n  const [theme, setThemeState] = React.useState<ColorTheme>(defaultTheme)\n  const [resolvedMode, setResolvedMode] = React.useState<\"light\" | \"dark\">(\"light\")\n  const [mounted, setMounted] = React.useState(false)\n\n  // ===================================\n  // 🌙 DARK MODE APPLICATION\n  // ===================================\n  // 🚨 AI AGENT GUIDANCE:\n  // - This function applies the dark mode class to the DOM\n  // - DO NOT modify the DOM manipulation logic\n  // - This ONLY handles .dark class addition/removal\n  // - Color themes are handled separately in applyColorTheme\n  // ===================================\n\n  const applyThemeMode = React.useCallback((newMode: Mode) => {\n    // 🚨 DO NOT modify this root element selection\n    const root = window.document.documentElement\n\n    // Resolve system mode to actual light/dark\n    let resolved: \"light\" | \"dark\" = newMode as \"light\" | \"dark\"\n\n    if (newMode === \"system\") {\n      // 🚨 DO NOT modify this system preference detection\n      resolved = window.matchMedia('(prefers-color-scheme: dark)').matches ? \"dark\" : \"light\"\n    }\n\n    // Apply or remove dark mode class\n    // 🚨 DO NOT modify this class logic - it's essential for CSS overrides\n    if (resolved === \"dark\") {\n      root.classList.add('dark')\n    } else {\n      root.classList.remove('dark')\n    }\n\n    setResolvedMode(resolved)\n\n    // Update meta theme-color for mobile browsers\n    // 🚨 DO NOT remove this - it's essential for mobile app experience\n    const themeColor = resolved === \"dark\" ? \"var(--background)\" : \"var(--background)\"\n    const metaThemeColor = document.querySelector('meta[name=\"theme-color\"]')\n    if (metaThemeColor) {\n      metaThemeColor.setAttribute('content', themeColor)\n    } else {\n      const meta = document.createElement('meta')\n      meta.name = \"theme-color\"\n      meta.content = themeColor\n      document.head.appendChild(meta)\n    }\n\n    // Debug logging - 🚨 DO NOT remove, helpful for development\n    console.log(`🎨 Theme Mode: ${newMode} (resolved: ${resolved})`)\n  }, [])\n\n  // ===================================\n  // 🎨 DYNAMIC THEME CSS LOADING\n  // ===================================\n  // 🚨 AI AGENT GUIDANCE:\n  // - This function dynamically loads theme CSS files\n  // - DO NOT modify the CSS loading logic\n  // - This follows the proper architecture: separate theme files\n  // - Works WITH dark mode - themes apply to both light and dark\n  // ===================================\n\n  const applyColorTheme = React.useCallback(async (newTheme: ColorTheme) => {\n    // 🚨 DO NOT modify this theme loading logic\n    const root = window.document.documentElement\n\n    // Remove existing theme CSS links\n    // 🚨 DO NOT modify this selector - it targets theme CSS links\n    const existingThemeLinks = root.querySelectorAll('link[data-theme-css]')\n    existingThemeLinks.forEach(link => link.remove())\n\n    // Don't load CSS for base theme (uses globals.css defaults)\n    if (newTheme === 'base') {\n      console.log(`🎨 Color Theme: ${newTheme} (using base theme)`)\n      return\n    }\n\n    // Create and append new theme CSS link\n    // 🚨 DO NOT modify this link creation logic\n    const themeLink = document.createElement('link')\n    themeLink.rel = 'stylesheet'\n    themeLink.href = `/themes/${newTheme}.css`\n    themeLink.setAttribute('data-theme-css', newTheme)\n    themeLink.setAttribute('data-theme-name', newTheme)\n\n    // Add the theme CSS to document head\n    document.head.appendChild(themeLink)\n\n    // Debug logging - 🚨 DO NOT remove, helpful for development\n    console.log(`🎨 Color Theme: ${newTheme} (loaded /themes/${newTheme}.css)`)\n  }, [])\n\n  // ===================================\n  // 💾 LOCAL STORAGE INITIALIZATION\n  // ===================================\n  // 🚨 AI AGENT GUIDANCE:\n  // - This effect loads saved mode and theme preferences from localStorage\n  // - DO NOT modify the storage key logic\n  // - DO NOT change the mounted state handling\n  // ===================================\n\n  React.useEffect(() => {\n    // 🚨 DO NOT modify this storage key retrieval\n    const storedMode = localStorage.getItem(modeStorageKey)\n    const storedTheme = localStorage.getItem(themeStorageKey)\n\n    if (storedMode) {\n      setModeState(storedMode as Mode)\n    }\n\n    if (storedTheme) {\n      setThemeState(storedTheme as ColorTheme)\n    }\n\n    // 🚨 DO NOT remove this mounted state - prevents hydration mismatches\n    setMounted(true)\n  }, [modeStorageKey, themeStorageKey])\n\n  // ===================================\n  // 🎯 THEME MODE APPLICATION\n  // ===================================\n  // 🚨 AI AGENT GUIDANCE:\n  // - This effect applies the theme mode when state changes\n  // - DO NOT modify the dependency array\n  // - DO NOT remove the mounted check\n  // ===================================\n\n  React.useEffect(() => {\n    if (mounted) {\n      applyThemeMode(mode)\n    }\n  }, [mode, mounted, applyThemeMode])\n\n  // ===================================\n  // 🎨 COLOR THEME APPLICATION\n  // ===================================\n  // 🚨 AI AGENT GUIDANCE:\n  // - This effect applies the color theme when state changes\n  // - DO NOT modify the dependency array\n  // - DO NOT remove the mounted check\n  // ===================================\n\n  React.useEffect(() => {\n    if (mounted) {\n      applyColorTheme(theme)\n    }\n  }, [theme, mounted, applyColorTheme])\n\n  // ===================================\n  // 🖥️ SYSTEM PREFERENCE LISTENING\n  // ===================================\n  // 🚨 AI AGENT GUIDANCE:\n  // - This effect listens for system theme preference changes\n  // - DO NOT modify the media query or event handling\n  // - DO NOT remove this - it's essential for system mode functionality\n  // ===================================\n\n  React.useEffect(() => {\n    if (!enableSystem) return\n\n    // 🚨 DO NOT modify this media query\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')\n\n    const handleChange = () => {\n      if (mode === \"system\") {\n        applyThemeMode(\"system\")\n      }\n    }\n\n    // 🚨 DO NOT modify event listener management\n    mediaQuery.addEventListener('change', handleChange)\n    return () => mediaQuery.removeEventListener('change', handleChange)\n  }, [mode, applyThemeMode, enableSystem])\n\n  // ===================================\n  // 🔄 MODE & THEME MANAGEMENT FUNCTIONS\n  // ===================================\n  // 🚨 AI AGENT GUIDANCE:\n  // - These functions provide theme mode and color theme management\n  // - DO NOT modify the localStorage logic\n  // - DO NOT change the toggle cycling behavior\n  // ===================================\n\n  const setMode = React.useCallback((newMode: Mode) => {\n    setModeState(newMode)\n    // 🚨 DO NOT modify this localStorage persistence\n    localStorage.setItem(modeStorageKey, newMode)\n  }, [modeStorageKey])\n\n  const toggleMode = React.useCallback(() => {\n    // 🚨 DO NOT modify this cycling behavior\n    const currentMode = mode\n    let newMode: Mode\n\n    if (currentMode === \"light\") {\n      newMode = \"dark\"\n    } else if (currentMode === \"dark\") {\n      newMode = enableSystem ? \"system\" : \"light\"\n    } else {\n      newMode = \"light\"\n    }\n\n    setMode(newMode)\n  }, [mode, enableSystem, setMode])\n\n  const setTheme = React.useCallback((newTheme: ColorTheme) => {\n    setThemeState(newTheme)\n    // 🚨 DO NOT modify this localStorage persistence\n    localStorage.setItem(themeStorageKey, newTheme)\n  }, [themeStorageKey])\n\n  const toggleTheme = React.useCallback(() => {\n    // 🚨 DO NOT modify this cycling behavior\n    const themes: ColorTheme[] = [\"base\", \"blue\", \"purple\", \"green\", \"orange\", \"red\"]\n    const currentIndex = themes.indexOf(theme)\n    const nextIndex = (currentIndex + 1) % themes.length\n    setTheme(themes[nextIndex])\n  }, [theme, setTheme])\n\n  // Context value object\n  // 🚨 DO NOT modify this structure - components depend on it\n  const value = {\n    mode,\n    setMode,\n    resolvedMode,\n    toggleMode,\n    theme,\n    setTheme,\n    toggleTheme,\n  }\n\n  // ===================================\n  // 🔒 HYDRATION MISMATCH PREVENTION\n  // ===================================\n  // 🚨 AI AGENT GUIDANCE:\n  // - This prevents server/client rendering mismatches\n  // - DO NOT modify this rendering logic\n  // - DO NOT remove the mounted check\n  // ===================================\n\n  if (!mounted) {\n    return (\n      <ThemeContext.Provider value={value}>\n        {children}\n      </ThemeContext.Provider>\n    )\n  }\n\n  return (\n    <ThemeContext.Provider value={value}>\n      {children}\n    </ThemeContext.Provider>\n  )\n}\n\n// ===================================\n// 🎣 THEME HOOK\n// ===================================\n// 🚨 AI AGENT GUIDANCE:\n// - This hook provides access to theme functionality\n// - DO NOT modify the hook logic or error message\n// - Components MUST use this hook to access theme features\n// ===================================\n\nexport function useTheme() {\n  const context = React.useContext(ThemeContext)\n  if (context === undefined) {\n    // 🚨 DO NOT modify this error message - it's essential for debugging\n    throw new Error(\"useTheme must be used within a ThemeProvider\")\n  }\n  return context\n}"],"names":[],"mappings":"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","debugId":null}}]
}